(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[0],{156:function(t,e,n){},157:function(t,e,n){},185:function(t,e,n){"use strict";n.r(e);var a,s,i=n(0),c=n.n(i),r=n(41),o=n.n(r),d=(n(156),n(63)),u=(n(157),n(286)),l=n(287),j=n(288),b=n(284),p=n(285),O=n(290),f=n(264),h=n(289),m=n(21),g=n(272),v=n(267),x=n(23),S=n(123),T=n.n(S);!function(t){t[t.New=0]="New",t[t.InProgress=1]="InProgress",t[t.Completed=2]="Completed",t[t.Draft=3]="Draft"}(a||(a={})),function(t){t[t.Low=0]="Low",t[t.Middle=1]="Middle",t[t.Hi=2]="Hi",t[t.Urgently=3]="Urgently",t[t.Later=4]="Later"}(s||(s={}));var A=T.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/",withCredentials:!0,headers:{"API-KEY":"21d990e0-eae8-42bd-a185-362e1cc41b0a"}}),I=function(){return A.get("todo-lists")},k=function(t){return A.post("todo-lists",{title:t})},y=function(t){return A.delete("todo-lists/".concat(t))},C=function(t,e){return A.put("todo-lists/".concat(t),{title:e})},w=function(t){return A.get("todo-lists/".concat(t,"/tasks"))},E=function(t,e){return A.post("todo-lists/".concat(t,"/tasks"),{title:e})},L=function(t,e){return A.delete("todo-lists/".concat(t,"/tasks/").concat(e))},D=function(t,e,n){return A.put("todo-lists/".concat(t,"/tasks/").concat(e),n)},P=function(t){return A.post("auth/login",t)},N=function(){return A.delete("auth/login")},R=function(){return A.get("auth/me")},G=function(t,e){t.messages.length?e(F.setAppError(t.messages[0])):e(F.setAppError("Some error occurred")),e(F.setAppStatus("failed"))},H=function(t,e){e(F.setAppError(t.message)),e(F.setAppStatus("failed"))},K=n(86),M=Object(K.b)({name:"auth",initialState:{isLoggedIn:!1},reducers:{setIsLoggedIn:function(t,e){t.isLoggedIn=e.payload.value}}}),U=M.reducer,z={status:"idle",errorMessage:null,initialized:!1},F={setAppStatus:function(t){return{type:"APP/SET-STATUS",status:t}},setAppError:function(t){return{type:"APP/SET-ERROR",error:t}},setAppInitialized:function(t){return{type:"APP/SET-INITIALIZED",initialized:t}}},V=n(2),W=i.forwardRef((function(t,e){return Object(V.jsx)(v.a,Object(m.a)({elevation:6,ref:e,variant:"filled"},t))}));function Z(){var t=Object(x.c)((function(t){return t.app.errorMessage})),e=Object(x.b)(),n=function(t,n){"clickaway"!==n&&e(F.setAppError(null))},a=null!==t;return Object(V.jsx)(g.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:a,autoHideDuration:4e3,onClose:n,children:Object(V.jsx)(W,{onClose:n,severity:"error",sx:{width:"100%"},children:t})})}var q=n(278),B=n(270),J=n(273),$=n(274),_=n(282),Y=n(255),Q=n(266),X=n(279),tt=n(22),et=n(132),nt=function(){var t=Object(x.c)((function(t){return t.auth.isLoggedIn})),e=Object(x.b)(),n=Object(et.a)({initialValues:{email:"",password:"",rememberMe:!1},validate:function(t){var e={};return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(e.email="Invalid email address"):e.email="Required field",t.password?t.password.length<3&&(e.password="Invalid password ( < 3 symbols )"):e.password="Required field",e},onSubmit:function(t){var a;n.resetForm(),e((a=t,function(t){t(F.setAppStatus("loading")),P(a).then((function(e){0===e.data.resultCode?(t(M.actions.setIsLoggedIn({value:!0})),t(F.setAppStatus("succeeded"))):G(e.data,t)})).catch((function(e){H(e,t)}))}))}});return t?Object(V.jsx)(tt.a,{to:"/"}):Object(V.jsx)("div",{style:{marginTop:"50px"},children:Object(V.jsx)(q.a,{container:!0,justifyContent:"center",children:Object(V.jsx)(q.a,{item:!0,justifyContent:"center",children:Object(V.jsxs)(J.a,{children:[Object(V.jsxs)(Y.a,{children:[Object(V.jsxs)("p",{style:{fontWeight:"bold"},children:["To log in get registered",Object(V.jsx)("a",{href:"https://social-network.samuraijs.com/",target:" _blank",children:" here"})]}),Object(V.jsx)("p",{style:{fontWeight:"bold"},children:"or use common test account credentials:"}),Object(V.jsx)("p",{style:{fontWeight:"bold"},children:"Email: free@samuraijs.com"}),Object(V.jsx)("p",{style:{fontWeight:"bold"},children:"Password: free"})]}),Object(V.jsx)("form",{onSubmit:n.handleSubmit,children:Object(V.jsxs)(_.a,{children:[Object(V.jsx)(Q.a,Object(m.a)({color:"success",label:"Email",margin:"normal"},n.getFieldProps("email"))),n.touched.email&&n.errors.email?Object(V.jsx)("div",{style:{color:"red"},children:n.errors.email}):null,Object(V.jsx)(Q.a,Object(m.a)({color:"success",type:"password",label:"Password",margin:"normal"},n.getFieldProps("password"))),n.touched.password&&n.errors.password?Object(V.jsx)("div",{style:{color:"red"},children:n.errors.password}):null,Object(V.jsx)($.a,{label:"Remember me",control:Object(V.jsx)(B.a,{color:"success",onChange:n.handleChange,checked:n.values.rememberMe,name:"rememberMe"})}),Object(V.jsx)(X.a,{type:"submit",variant:"contained",color:"success",children:"Login"})]})})]})})})})},at=n(275),st=n(283),it=n(9),ct=n(262),rt=n(265),ot=c.a.memo((function(t){var e=Object(i.useState)(""),n=Object(it.a)(e,2),a=n[0],s=n[1],c=Object(i.useState)(null),r=Object(it.a)(c,2),o=r[0],d=r[1],u=function(){""!==a.trim()?(t.addItem(a),s("")):d("Title is required")};return Object(V.jsxs)("div",{children:[Object(V.jsx)(rt.a,{variant:"outlined",error:!!o,value:a,onChange:function(t){s(t.currentTarget.value)},onKeyPress:function(t){null!==o&&d(null),13===t.charCode&&u()},label:"Title",helperText:o,size:"small",disabled:t.disabled}),Object(V.jsx)(b.a,{color:"success",onClick:u,disabled:t.disabled,children:Object(V.jsx)(ct.a,{})})]})})),dt=n(263),ut=c.a.memo((function(t){var e=Object(i.useState)(!1),n=Object(it.a)(e,2),a=n[0],s=n[1],c=Object(i.useState)(t.value),r=Object(it.a)(c,2),o=r[0],d=r[1],u=function(){s(!1),t.onChange(o)};return a?Object(V.jsx)("input",{value:o,onChange:function(t){d(t.currentTarget.value)},autoFocus:!0,onBlur:u,onKeyPress:function(t){13===t.charCode&&u()}}):Object(V.jsx)("span",{onDoubleClick:function(){t.disabled||(s(!0),d(t.value))},children:t.value})})),lt=n(271),jt=n(52),bt=n(15),pt=n(4),Ot=n(32),ft=n.n(Ot),ht=[],mt=function(t){return{type:"REMOVE-TODOLIST",todolistId:t}},gt=function(t){return{type:"ADD-TODOLIST",todolist:t}},vt=function(t,e){return{type:"CHANGE-TODOLIST-TITLE",todolistId:t,title:e}},xt=function(t,e){return{type:"CHANGE-TODOLIST-STATUS",todolistId:t,status:e}},St=function(t,e){return{type:"CHANGE-TODOLIST-FILTER",todolistId:t,filter:e}},Tt=function(t){return{type:"SET-TODOS",todos:t}},At={},It=function(t,e){return{type:"REMOVE-TASK",taskId:t,todolistId:e}},kt=function(t){return{type:"ADD-TASK",task:t}},yt=function(t,e,n){return{type:"CHANGE-TASK-STATUS",status:e,todolistId:n,taskId:t}},Ct=function(t,e,n){return{type:"CHANGE-TASK-TITLE",title:e,todolistId:n,taskId:t}},wt=function(t,e){return{type:"GET-TASKS",tasks:e,todolistId:t}},Et=c.a.memo((function(t){var e=Object(x.b)(),n=Object(i.useCallback)((function(){var n,a;e((n=t.task.id,a=t.todolist.id,function(){var t=Object(jt.a)(ft.a.mark((function t(e){return ft.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(F.setAppStatus("loading")),e(xt(a,"loading")),t.next=4,L(a,n);case 4:t.sent,e(It(n,a)),e(F.setAppStatus("succeeded")),e(xt(a,"succeeded"));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}),[t.task.id,t.todolist.id]),s=Object(i.useCallback)((function(n){var s,i,c,r=n.currentTarget.checked;e((s=t.task.id,i=t.todolist.id,c=r?a.Completed:a.New,function(){var t=Object(jt.a)(ft.a.mark((function t(e,n){var a;return ft.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e(F.setAppStatus("loading")),e(xt(i,"loading")),!(a=n().tasks[i].find((function(t){return t.id===s})))){t.next=9;break}return t.next=6,D(i,s,{title:a.title,startDate:a.startDate,priority:a.priority,description:a.description,deadline:a.deadline,status:c});case 6:e(yt(s,c,i)),e(F.setAppStatus("succeeded")),e(xt(i,"succeeded"));case 9:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()))}),[t.task.id,t.todolist.id]),c=Object(i.useCallback)((function(n){e(function(t,e,n){return function(a,s){a(F.setAppStatus("loading"));var i=s().tasks[n].find((function(e){return e.id===t}));i&&D(n,t,{title:e,startDate:i.startDate,priority:i.priority,description:i.description,deadline:i.deadline,status:i.status}).then((function(s){0===s.data.resultCode?(a(Ct(t,e,n)),a(F.setAppStatus("succeeded"))):G(s.data,a)})).catch((function(t){H(t,a)}))}}(t.task.id,n,t.todolist.id))}),[t.task.id,t.todolist.id]);return Object(V.jsxs)("div",{className:t.task.status===a.Completed?"is-done":"",children:[Object(V.jsx)(lt.a,{checked:t.task.status===a.Completed,color:"success",onChange:s,disabled:"loading"===t.todolist.entityStatus}),Object(V.jsx)(ut,{value:t.task.title,onChange:c,disabled:"loading"===t.todolist.entityStatus}),Object(V.jsx)(b.a,{onClick:n,disabled:"loading"===t.todolist.entityStatus,children:Object(V.jsx)(dt.a,{color:"error"})})]},t.task.id)})),Lt=["demo"],Dt=c.a.memo((function(t){var e=t.demo,n=void 0!==e&&e,s=Object(d.a)(t,Lt),c=Object(x.b)();Object(i.useEffect)((function(){var t;n||c((t=s.todolist.id,function(){var e=Object(jt.a)(ft.a.mark((function e(n){var a;return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(F.setAppStatus("loading")),e.next=3,w(t);case 3:a=e.sent,n(wt(t,a.data.items)),n(F.setAppStatus("succeeded"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]);var r=Object(i.useCallback)((function(t,e){c(St(e,t))}),[]),o=Object(i.useCallback)((function(t){c(function(t,e){return function(){var n=Object(jt.a)(ft.a.mark((function n(a){return ft.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a(F.setAppStatus("loading")),a(xt(t,"loading")),n.next=4,C(t,e);case 4:a(vt(t,e)),a(F.setAppStatus("succeeded")),a(xt(t,"succeeded"));case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()}(s.todolist.id,t))}),[s.todolist.id]),u=Object(i.useCallback)((function(){var t;c((t=s.todolist.id,function(){var e=Object(jt.a)(ft.a.mark((function e(n){return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(F.setAppStatus("loading")),n(xt(t,"loading")),e.next=4,y(t);case 4:n(mt(t)),n(F.setAppStatus("succeeded"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[]),l=Object(i.useCallback)((function(t){c(function(t,e){return function(n){n(F.setAppStatus("loading")),n(xt(t,"loading")),E(t,e).then((function(e){0===e.data.resultCode?(n(kt(e.data.data.item)),n(F.setAppStatus("succeeded")),n(xt(t,"succeeded"))):(G(e.data,n),n(xt(t,"failed")))})).catch((function(e){H(e,n),n(xt(t,"failed"))}))}}(s.todolist.id,t))}),[s.todolist.id]),j=Object(i.useCallback)((function(){return r("all",s.todolist.id)}),[s.todolist.id,r]),O=Object(i.useCallback)((function(){return r("active",s.todolist.id)}),[s.todolist.id,r]),f=Object(i.useCallback)((function(){return r("completed",s.todolist.id)}),[s.todolist.id,r]),h=s.tasks;return"active"===s.todolist.filter&&(h=s.tasks.filter((function(t){return t.status===a.New}))),"completed"===s.todolist.filter&&(h=s.tasks.filter((function(t){return t.status===a.Completed}))),Object(V.jsxs)("div",{children:[Object(V.jsxs)("h3",{children:[Object(V.jsx)(ut,{value:s.todolist.title,onChange:o,disabled:"loading"===s.todolist.entityStatus}),Object(V.jsx)(b.a,{onClick:u,disabled:"loading"===s.todolist.entityStatus,children:Object(V.jsx)(dt.a,{})})]}),Object(V.jsx)(ot,{addItem:l,disabled:"loading"===s.todolist.entityStatus}),Object(V.jsx)("div",{children:h.map((function(t){return Object(V.jsx)(Et,{task:t,todolist:s.todolist},t.id)}))}),Object(V.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(V.jsx)(p.a,{variant:"all"===s.todolist.filter?"contained":"outlined",onClick:j,color:"primary",children:"All"}),Object(V.jsx)(p.a,{variant:"active"===s.todolist.filter?"contained":"outlined",onClick:O,color:"warning",children:"Active"}),Object(V.jsx)(p.a,{variant:"completed"===s.todolist.filter?"contained":"outlined",onClick:f,color:"success",children:"Completed"})]})]})})),Pt=["demo"],Nt=c.a.memo((function(t){var e=t.demo,n=void 0!==e&&e,a=(Object(d.a)(t,Pt),Object(x.c)((function(t){return t.tasks}))),s=Object(x.c)((function(t){return t.todoLists})),c=Object(x.c)((function(t){return t.app.status})),r=Object(x.c)((function(t){return t.auth.isLoggedIn})),o=Object(x.b)();Object(i.useEffect)((function(){!n&&r&&o(function(){var t=Object(jt.a)(ft.a.mark((function t(e){var n;return ft.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(F.setAppStatus("loading")),t.next=3,I();case 3:n=t.sent,e(Tt(n.data)),e(F.setAppStatus("succeeded"));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]);var u=Object(i.useCallback)((function(t){o(function(t){return function(){var e=Object(jt.a)(ft.a.mark((function e(n){var a;return ft.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(F.setAppStatus("loading")),e.next=3,k(t);case 3:a=e.sent,n(gt(a.data.data.item)),n(F.setAppStatus("succeeded"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}(t))}),[]);return r?Object(V.jsxs)(V.Fragment,{children:[Object(V.jsx)(at.a,{container:!0,style:{padding:"20px"},children:Object(V.jsx)(ot,{addItem:u,disabled:"loading"===c})}),Object(V.jsx)(at.a,{container:!0,spacing:3,children:s.map((function(t){var e=a[t.id];return Object(V.jsx)(at.a,{item:!0,children:Object(V.jsx)(st.a,{style:{padding:"10px"},children:Object(V.jsx)(Dt,{todolist:t,tasks:e,demo:n})})},t.id)}))})]}):Object(V.jsx)(tt.a,{to:"/login"})})),Rt=["demo"],Gt=function(t){var e=t.demo,n=void 0!==e&&e,a=(Object(d.a)(t,Rt),Object(x.c)((function(t){return t.app.status}))),s=Object(x.c)((function(t){return t.app.initialized})),c=Object(x.c)((function(t){return t.auth.isLoggedIn})),r=Object(x.b)();Object(i.useEffect)((function(){r((function(t){R().then((function(e){0===e.data.resultCode&&t(M.actions.setIsLoggedIn({value:!0})),t(F.setAppInitialized(!0))}))}))}),[]);var o=Object(i.useCallback)((function(){r((function(t){t(F.setAppStatus("loading")),N().then((function(e){0===e.data.resultCode?(t(M.actions.setIsLoggedIn({value:!1})),t(F.setAppStatus("succeeded"))):G(e.data,t)})).catch((function(e){H(e,t)}))}))}),[]);return s?Object(V.jsxs)("div",{className:"App",children:[Object(V.jsx)(Z,{}),Object(V.jsx)(l.a,{style:{backgroundColor:"green",color:"white"},color:"transparent",position:"static",children:Object(V.jsxs)(j.a,{children:[Object(V.jsx)(b.a,{edge:"start",color:"inherit","aria-label":"menu",children:Object(V.jsx)(f.a,{})}),c&&Object(V.jsx)(p.a,{color:"inherit",variant:"outlined",onClick:o,children:"Log out"})]})}),"loading"===a&&Object(V.jsx)(h.a,{sx:{position:"relative"},color:"warning"}),Object(V.jsx)(O.a,{fixed:!0,children:Object(V.jsxs)(tt.d,{children:[Object(V.jsx)(tt.b,{path:"/",element:Object(V.jsx)(Nt,{demo:n})}),Object(V.jsx)(tt.b,{path:"login",element:Object(V.jsx)(nt,{})}),Object(V.jsx)(tt.b,{path:"/404",element:Object(V.jsx)("h1",{children:"404: PAGE NOT FOUND "})}),Object(V.jsx)(tt.b,{path:"*",element:Object(V.jsx)(tt.a,{to:"/404"})})]})})]}):Object(V.jsx)("div",{style:{position:"fixed",top:"30%",textAlign:"center",width:"100%"},children:Object(V.jsx)(u.a,{})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ht=n(44),Kt=n(75),Mt=Object(Ht.b)({tasks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TASK":return Object(m.a)(Object(m.a)({},t),{},Object(pt.a)({},e.todolistId,t[e.todolistId].filter((function(t){return t.id!==e.taskId}))));case"ADD-TASK":return Object(m.a)(Object(m.a)({},t),{},Object(pt.a)({},e.task.todoListId,[e.task].concat(Object(bt.a)(t[e.task.todoListId]))));case"CHANGE-TASK-STATUS":return Object(m.a)(Object(m.a)({},t),{},Object(pt.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(m.a)(Object(m.a)({},t),{},{status:e.status}):t}))));case"CHANGE-TASK-TITLE":return Object(m.a)(Object(m.a)({},t),{},Object(pt.a)({},e.todolistId,t[e.todolistId].map((function(t){return t.id===e.taskId?Object(m.a)(Object(m.a)({},t),{},{title:e.title}):t}))));case"ADD-TODOLIST":return Object(m.a)(Object(m.a)({},t),{},Object(pt.a)({},e.todolist.id,[]));case"REMOVE-TODOLIST":var n=Object(m.a)({},t);return delete n[e.todolistId],n;case"SET-TODOS":var a=Object(m.a)({},t);return e.todos.forEach((function(t){a[t.id]=[]})),a;case"GET-TASKS":var s=Object(m.a)({},t);return s[e.todolistId]=e.tasks,s;default:return t}},todoLists:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"REMOVE-TODOLIST":return t.filter((function(t){return t.id!==e.todolistId}));case"ADD-TODOLIST":return[Object(m.a)(Object(m.a)({},e.todolist),{},{filter:"all",entityStatus:"idle"})].concat(Object(bt.a)(t));case"CHANGE-TODOLIST-TITLE":return t.map((function(t){return t.id===e.todolistId?Object(m.a)(Object(m.a)({},t),{},{title:e.title}):t}));case"CHANGE-TODOLIST-FILTER":return t.map((function(t){return t.id===e.todolistId?Object(m.a)(Object(m.a)({},t),{},{filter:e.filter}):t}));case"SET-TODOS":return e.todos.map((function(t){return Object(m.a)(Object(m.a)({},t),{},{filter:"all",entityStatus:"idle"})}));case"CHANGE-TODOLIST-STATUS":return t.map((function(t){return t.id===e.todolistId?Object(m.a)(Object(m.a)({},t),{},{entityStatus:e.status}):t}));default:return t}},app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"APP/SET-STATUS":return Object(m.a)(Object(m.a)({},t),{},{status:e.status});case"APP/SET-ERROR":return Object(m.a)(Object(m.a)({},t),{},{errorMessage:e.error});case"APP/SET-INITIALIZED":return Object(m.a)(Object(m.a)({},t),{},{initialized:e.initialized});default:return t}},auth:U}),Ut=Object(K.a)({reducer:Mt,middleware:function(t){return t().prepend(Kt.a)}});window.store=Ut;var zt=n(73);o.a.render(Object(V.jsx)(x.a,{store:Ut,children:Object(V.jsx)(zt.a,{children:Object(V.jsx)(Gt,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[185,1,2]]]);
//# sourceMappingURL=main.bb84d44f.chunk.js.map